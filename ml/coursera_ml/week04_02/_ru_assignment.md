# Составление фондового индекса

Данное задание основано на материалах лекций по методу главных
компонент и посвящено знакомству с методом.

## Вы научитесь:

- работать с методом главных компонент
- использовать его для вычисления улучшенного индекса Доу-Джонса

## Введение

Метод главных компонент (principal component analysis, PCA) - это один
из методов обучения без учителя, который позволяет сформировать но-
вые признаки, являющиеся линейными комбинациями старых. При этом
новые признаки строятся так, чтобы сохранить как можно больше дис-
персии в данных. Иными словами, метод главных компонент понижает
размерность данных оптимальным с точки зрения сохранения дисперсии
способом.
Основным параметром метода главных компонент является количе-
ство новых признаков. Как и в большинстве методов машинного обуче-
ния, нет четких рекомендаций по поводу выбора значения этого парамет-
ров. Один из подходов - выбирать минимальное число компонент, при
котором объясняется не менее определенной доли дисперсии (это озна-
чает, что в выборке сохраняется данная доля от исходной дисперсии).
В этом задании понадобится измерять схожесть двух наборов вели-
чин. Если имеется набор пар измерений (например, одна пара - предска-
зания двух классификаторов для одного и того же объекта), то охарак-
теризовать их зависимость друг от друга можно с помощью корреляции


Пирсона. Она принимает значения от -1 до 1 и показывает, насколько
данные величины линейно зависимы. Если корреляция равна -1 или 1,
то величины линейно выражаются друг через друга. Если она равна ну-
лю, то линейная зависимость между величинами отсутствует.

## Данные

В этом задании мы будем работать с данными о стоимостях акций 30
крупнейших компаний США. На основе этих данных можно оценить
состояние экономики, например, с помощью индекса Доу-Джонса. Со
временем состав компаний, по которым строится индекс меняется. Для
набора данных был взят период с 23.09.2013 по 18.03.2015, в котором
набор компаний был фиксирован (подробнее почитать о составе можно
по ссылке из материалов).
Одним из существенных недостатков индекса Доу-Джонса является
способ его вычисления - при подсчёте индекса цены входящих в него
акций складываются, а потом делятся на поправочный коэффициент. В
результате, даже если одна компания заметно меньше по капитализации,
чем другая, но стоимость одной её акции выше, то она сильнее влияет
на индекс. Даже большое процентное изменение цены относительно де-
шёвой акции может быть нивелировано незначительным в процентном
отношении изменением цены более дорогой акции.

## Реализация в sklearn

Метод главных компонент реализован в пакете scikit-learn в модуле decomposition
в классе PCA. Основным параметром является количество компонент
(n_components). Для обученного преобразования этот класс позволяет
вычислять различные характеристики. Например, поле explained_variance_ratio_
содержит процент дисперсии, который объясняет каждая компонента.
Поле components_ содержит информацию о том, какой вклад вносят
признаки в компоненты. Чтобы применить обученное преобразование к
данным, можно воспользоваться методом transform.
Для нахождения коэффициента корреляции Пирсона можно восполь-
зоваться функцией corrcoef из пакета numpy.


## Материалы

Dow Jones Industrial Average История состава компаний, входящих в ин-
декс Dow Jones

## Инструкция по выполнению

1. Загрузите данные close_prices.csv. В этом файле приведены цены
    акций 30 компаний на закрытии торгов за каждый день периода.
2. На загруженных данных обучите преобразование PCA с числом
    компоненты равным 10. Скольких компонент хватит, чтобы объяс-
    нить 90% дисперсии?
3. Примените построенное преобразование к исходным данным и возь-
    мите значения первой компоненты.
4. Загрузите информацию об индексе Доу-Джонса из файла djia_prices.csv.
    Чему равна корреляция Пирсона между первой компонентой и ин-
    дексом Доу-Джонса?
5. Какая компания имеет наибольший вес в первой компоненте?

При необходимости округляйте ответ до двух знаков после запятой.
Ответ на каждое задание - текстовый файл, содержащий ответ в
первой строчке. Обратите внимание, что отправляемые файлы не долж-
ны содержать пустую строку в конце. Данный нюанс является ограни-
чением платформы Coursera. Мы работаем над тем, чтобы убрать это
ограничение.


